{% extends "base.html" %}
{% block title %}Home - MySite{% endblock %}
{% block content %}
<div class="hero-section text-white text-center py-5 mb-5 rounded-3" style="background-color: #2c3e50; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
  <h1 class="display-4 fw-bold mb-3">
    <i class="fas fa-graduation-cap me-3"></i>Welcome to MySite
  </h1>
  <p class="lead">Modern Education Management Platform</p>
  <p>Manage Students, Products, and Blog Posts with ease</p>
</div>

<!-- Nav tabs -->
<ul class="nav nav-pills nav-fill mb-4" id="mainTabs" role="tablist" style="background: #ffffff; border-radius: 10px; padding: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
  <li class="nav-item" role="presentation">
    <button class="nav-link active rounded-pill fw-semibold" id="students-tab" data-bs-toggle="tab" data-bs-target="#students" type="button" role="tab" style="background-color: #3498db; border-color: #3498db;">
      <i class="fas fa-users me-2"></i>Students ({{ students.count }})
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link rounded-pill fw-semibold" id="products-tab" data-bs-toggle="tab" data-bs-target="#products" type="button" role="tab">
      <i class="fas fa-box me-2"></i>Products ({{ products.count }})
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link rounded-pill fw-semibold" id="blogs-tab" data-bs-toggle="tab" data-bs-target="#blogs" type="button" role="tab">
      <i class="fas fa-blog me-2"></i>Blog Posts ({{ posts.count }})
    </button>
  </li>
</ul>

<!-- Tab content -->
<div class="tab-content" id="mainTabContent">
  <!-- Students Tab -->
  <div class="tab-pane fade show active" id="students" role="tabpanel">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h4><i class="fas fa-users me-2" style="color: #3498db;"></i>Recent Students</h4>
      <a href="{% url 'student_create' %}" class="btn btn-primary btn-modern">
        <i class="fas fa-plus me-2"></i>Add New Student
      </a>
    </div>
    
    <div class="row">
      {% for student in students %}
        <div class="col-md-6 col-lg-4 mb-4">
          <div class="modern-card h-100">
            <div class="card-body p-4 text-center">
              <div class="rounded-circle p-3 d-inline-block mb-3" style="background-color: #e8f4f8;">
                <i class="fas fa-user-graduate fs-4" style="color: #3498db;"></i>
              </div>
              <h6 class="card-title">{{ student.first_name }} {{ student.last_name }}</h6>
              <p class="card-text small text-muted">
                <i class="fas fa-envelope me-1"></i>{{ student.email }}
              </p>
              <a href="{% url 'student_detail' student.pk %}" class="btn btn-outline-primary btn-modern btn-sm">
                <i class="fas fa-eye me-1"></i>View Details
              </a>
            </div>
          </div>
        </div>
      {% empty %}
        <div class="col-12">
          <div class="alert alert-info">
            No students yet. <a href="{% url 'student_create' %}">Create the first one!</a>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>

  <!-- Products Tab -->
  <div class="tab-pane fade" id="products" role="tabpanel">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h4><i class="fas fa-box me-2" style="color: #e67e22;"></i>Latest Products</h4>
      <div>
        <a href="{% url 'product_create' %}" class="btn btn-primary btn-modern me-2">
          <i class="fas fa-plus me-1"></i>Add Product
        </a>
        <a href="{% url 'category_list' %}" class="btn btn-outline-secondary btn-modern">
          <i class="fas fa-tags me-1"></i>Categories
        </a>
      </div>
    </div>
    
    <div class="row">
      {% for product in products %}
        <div class="col-md-4 col-lg-3 mb-4">
          <div class="modern-card h-100">
            <div class="card-body p-4">
              <div class="rounded-circle p-2 d-inline-block mb-3" style="background-color: #fdf2e9;">
                <i class="fas fa-box" style="color: #e67e22;"></i>
              </div>
              <h6 class="card-title">{{ product.title }}</h6>
              <p class="card-text small">{{ product.description|truncatewords:10 }}</p>
              <div class="d-flex justify-content-between align-items-center mb-3">
                <small class="text-muted">{{ product.category.name }}</small>
                <strong class="text-success">â‚¹{{ product.price }}</strong>
              </div>
              <a href="{% url 'product_detail' product.pk %}" class="btn btn-outline-primary btn-modern btn-sm w-100">
                <i class="fas fa-eye me-1"></i>View Product
              </a>
            </div>
          </div>
        </div>
      {% empty %}
        <div class="col-12">
          <div class="alert alert-info">
            No products yet. <a href="{% url 'product_create' %}">Add the first product!</a>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>

  <!-- Blog Posts Tab -->
  <div class="tab-pane fade" id="blogs" role="tabpanel">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h4><i class="fas fa-blog me-2" style="color: #9b59b6;"></i>Recent Blog Posts</h4>
      <div>
        <a href="{% url 'blog_create' %}" class="btn btn-primary btn-modern me-2">
          <i class="fas fa-pen me-1"></i>Write New Post
        </a>
        <a href="{% url 'blog_list' %}" class="btn btn-outline-secondary btn-modern">
          <i class="fas fa-list me-1"></i>View All Posts
        </a>
      </div>
    </div>
    
    <div class="row">
      {% for post in posts %}
        <div class="col-md-6 mb-4">
          <div class="modern-card h-100">
            <div class="card-body p-4">
              <div class="rounded-circle p-2 d-inline-block mb-3" style="background-color: #f4ecf7;">
                <i class="fas fa-newspaper" style="color: #9b59b6;"></i>
              </div>
              <h6 class="card-title">{{ post.title }}</h6>
              <p class="card-text">{{ post.body|truncatewords:15 }}</p>
              <div class="mb-3">
                {% for tag in post.tags.all %}
                  <span class="badge me-1" style="background-color: #9b59b6;">{{ tag.name }}</span>
                {% empty %}
                  <span class="text-muted small">No tags</span>
                {% endfor %}
              </div>
              <a href="{% url 'blog_detail' post.pk %}" class="btn btn-outline-primary btn-modern btn-sm">
                <i class="fas fa-book-open me-1"></i>Read More
              </a>
            </div>
          </div>
        </div>
      {% empty %}
        <div class="col-12">
          <div class="alert alert-info">
            No blog posts yet. <a href="{% url 'blog_create' %}">Write the first post!</a>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

<script>
// Initialize Bootstrap tabs
document.addEventListener('DOMContentLoaded', function() {
  var triggerTabList = [].slice.call(document.querySelectorAll('#mainTabs button'));
  triggerTabList.forEach(function (triggerEl) {
    var tabTrigger = new bootstrap.Tab(triggerEl);
    triggerEl.addEventListener('click', function (event) {
      event.preventDefault();
      tabTrigger.show();
    });
  });
});
</script>
{% endblock %}